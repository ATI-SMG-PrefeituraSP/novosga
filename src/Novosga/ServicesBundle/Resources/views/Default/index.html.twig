{% extends "::base.html.twig" %}

{% block body %}
    <table id="datatable" class="table table-striped">
        <thead>
            <th>#</th>
            <th>{% trans %}Nome{% endtrans %}</th>
            <th>{% trans %}Macro{% endtrans %}</th>
            <th>{% trans %}Status{% endtrans %}</th>
            <th></th>
        </thead>
        <tbody>
        </tbody>
    </table>
    
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    
    <script>
        (function() {
            'use strict'
            
            $('#datatable').dataTable({
                processing: true,
                serverSide: true,
                searching: false,
                ajax: '{{ path('novosga_services_search') }}',
                pageLength: 10,
                columns: [
                    {
                        data: 'id'
                    },
                    {
                        data: 'nome',
                    },
                    {
                        data: 'macro',
                        render: function (macro) {
                            return macro ? macro.nome : '';
                        }
                    },
                    {
                        data: 'status'
                    },
                    {
                        data: 'id',
                        render: function (id) {
                            return '<a href="{{ path('novosga_services_index') }}edit/' + id + '">Edit</a>';
                        }
                    }
                ]
            }).on('preXhr.dt', function (e, settings, data) {
                $('#search-form :input').each(function (i, e) {
                    var input = $(e);
                    data.search[input.prop('name')] = input.val();
                });
            }).on('draw.dt', function () {
                
            });
        })();
    </script>
{% endblock %}